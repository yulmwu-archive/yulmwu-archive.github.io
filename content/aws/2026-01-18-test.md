---
title: '[AWS Challenge] 2025 지방기능경기대회 제 2과제 풀이'
description: '지방기능경기대회 클라우드 컴퓨팅 직종, 2025 제 2과제 풀이 및 설명'
slug: '2026-01-18-test'
author: yulmwu
date: 2026-01-18T00:52:31.030Z
updated_at: 2026-01-18T07:44:19.559Z
categories: ['AWS']
tags: ['aws']
series:
    name: AWS
    slug: aws
---

> 이 포스팅에서 사용된 아키텍처는 마이스터넷 지방기능경기대회 클라우드 직종 2025 제 2과제를 참조하며, 모든 저작권은 마이스터넷(한국산업인력공단)에 있음을 미리 알립니다.
> 
> 과제 문제지는 [이곳에서](https://smc-secu.net/?action=kboard_file_download&comment_uid=1022&file=file1&kboard-file-download-nonce=6075eae668) 확인하실 수 있습니다. (또는 마이스터넷 홈페이지에서도 확인 가능함)

# 0. Overview

> ### 선수 유의사항
> 
> **다음 유의사항을 고려하여 요구사항을 완성하시오.** (불필요한 항목은 중략됨)
> 
> - 문제에 제시된 **괄호**(`<>`)는 **변수**를 뜻함으로 선수가 적절히 변경하여 사용해야 합니다. (환경 변수 등)
> - Security Group의 **80/443 Outbound**는 **Any Open**(`0.0.0.0/0`)하여 사용할 수 있도록 합니다. (기본적으로 모든 TCP/UDP 트래픽의 Outbound는 `0.0.0.0/0`으로 허용됨)
> - **Bastion EC2**는 채점을 위해 사용합니다 서버들에 접속 문제가 생겨 채점에 불이익을 받지 않도록 합니다. (마지막 과제에서 Bastion Host가 삭제되지 않도록 주의할 것. 문제에 따로 안내되어 있지 않아 SSH 및 키 페어 방식으로 사용하였음)
> - 과제 종료 전 **실행 중인 테스트 및 부하를 중지**하여 서버에 문제가 없도록 해야 합니다. (KEDA 오토스케일링 등)
> - **Tag 정보**가 맞지 않거나 **권한 문제**가 생겨 채점이 불가하지 않도록 주의합니다. (문제를 유의하여 꼼꼼하게 작업할 수 있도록 해야함)

2025 클라우드 직종 지방기능경기대회 제 2과제에서 해결해야할 세부적인 각 문제는 아래와 같다. (각 문제는 서로 의존하지 않는 별개의 문제임)

1. **Secure Access via VPN**
2. **Event Driven Autoscaling**
3. **Infrastructure as Code (IaC)**
4. **EC2 Automation**

첫번째 문제는 **AWS Client VPN**을 구축하는 것이 주된 문제로, **VPC**와 **Client VPN**, **EC2** 및 **SSM**(System Manager) **Session Manager**를 구축해야 한다.

두번째 문제는 **EKS 클러스터**를 구축하고 [**KEDA**](https://velog.io/@yulmwu/kubernetes-keda)를 통해 **Event Driven 오토스케일링**을 구축하는 문제로, **EKS 클러스터**와 **SQS 큐**, 그리고 채점을 위한 EC2 Bastion Host를 구축해야 한다.

세번째 문제는 **Terraform IaC(HCL)**을 작성하는 문제로, **Terraform**을 통해 **VPC** 및 **EC2** 등을 구축해야 한다. 마찬가지로 채점을 위한 EC2 Bastion Host 또한 구축해야 한다.

마지막 네번째 문제는 **AWS EC2 삭제 자동화 셸 스크립트**를 작성하는 문제로, 문제에 유의하여 셸 스크립트를 작성하고 채점을 위한 EC2 Bastion Host를 구축해야한다.

---

총 경기 시간은 4시간으로, 안전하게 30분을 남기고 과제를 끝낸다는 가정 하에 각각 1시간/1시간/1시간/30분을 투자하면 아주 넉넉하게 풀이할 수 있을 것이다.

# 1. Secure Access via VPN

> AWS Client VPN을 통해 Local PC에서 AWS VPC에 접근할 수 있도록 합니다. VPC의 Name(tag)는 ws-vpn-vpc이며, CIDR은 `10.99.0.0/16`을 사용합니다.
> 
> ### VPC 구성
> 
> | Subnet Name         | CIDR            | Internet Access | AZ              |
> |---------------------|-----------------|-----------------|-----------------|
> | ws-public-subnet-a  | `10.99.0.0/24`  | IGW             | ap-northeast-2a |
> | ws-public-subnet-b  | `10.99.1.0/24`  | IGW             | ap-northeast-2b |
> | ws-private-subnet-a | `10.99.10.0/24` | NAT GW          | ap-northeast-2a |
> | ws-private-subnet-b | `10.99.11.0/24` | NAT GW          | ap-northeast-2b |
> 
> ### EC2 구성
> 
> 웹 서비스를 배포하기 위한 EC2를 생성합니다. Private Subnet에 AZ 별로 하나씩 총 2대의 인스턴스를 생성합니다. 채점 시 SSM Session Manager 기능을 통해 인스턴스에 연결할 수 있어야 합니다.
> 
> 아래 정보를 활용해 생성 후 `Welcome to the ws portal`이라는 메시지가 담긴 `index.html` 파일을 생성하고 웹서버가 보여줄 수 있도록 구성합니다. 최종적으로 인스턴스에서 `curl http://localhost/index.html` 호출 시 HTML 파일 내용을 출력해야 합니다.
> 
> - **EC2 name (Tag)**: ws-web-a, ws-web-b
> - **AMI**: Amazon Linux 2023
> - **Instance type**: t3.micro
> - **IAM role**: AmazonSSMManagedInstanceCore 권한을 가지는 IAM role 생성
> 
> ### AWS Client VPN
> 
> Local PC에서 VPC 내부의 EC2 인스턴스와 통신하기 위해 AWS Client VPN을 구성합니다. 
> 
> 구성이 모두 완료된 후, 웹 브라우저로 ws-web-a 및 ws-web-b 인스턴스의 IP에 접속하였을 때 `index.html`의 내용이 정상적으로 출력되어야 합니다. VPN 프로필은 미리 구성해둡니다.
> 
> - **Client VPN name (tag)**: ws-client-vpn
> - **Client CIDR**: 10.254.0.0/16
> - **Authentication option**: mutual authentication 활성화
> - **Target network subnet**: ws-private-subnet-a, ws-private-subnet-b
> - **Authorization rules**: VPC CIDR만 허용

# 2. Event-driven Autoscaling

> **KEDA**를 이용해 Pod Autoscaling이 가능하도록 합니다. 주문/배송 서비스(order-v1.py)에서 주문량에 따라 Pod가 늘어나고 줄어드는 스케일링을 구현해야 합니다.
> 
> ### EKS 구성
> 
> 웹 애플리케이션을 배포하기 위한 EKS cluster를 생성합니다. EKS cluster를 위해 Default VPC를 사용하거나 별도의 VPC를 새롭게 구성할 수도 있습니다.
> 
> EKS cluster 상에는 주문을 처리하기 위한 애플리케이션이 배포되어야 합니다. 주어진 바이너리는 Amazon Linux 2023에서 동작을 확인하였습니다. 애플리케이션을 실행하는 방법은 아래의 내용을 참고할 수 있습니다.
> 
> - **Cluster name**: order-cluster
> - **Cluster version**: 1.31
> - **K8s Namespace name**: order
> - **K8s Deployment name**: order-processor
> - **K8s Deployment min Pods 갯수**: 1
> 
> **Environment Variables**:
> 
> - **QUEUE_URL**: `<<아래에서 생성한 SQS URL>>`
> - **REGION_NAME**: `<<애플리케이션을 배포할 region>>`
> 
> ### EC2 Bastion Host 구성
> 
> 채점 시 사용하기 위해 Bastion 인스턴스를 생성해야 합니다. 인스턴스는 어느 VPC에 생성해도 무방하지만, EKS cluster에 접근 가능하며 AdministratorAccess 권한을 가지고 있어야 합니다.
> 
> 만약 Bastion 인스턴스에 접근할 수 없거나 EKS cluster에 접근할 수 없으면 채점 시 불이익을 받을 수 있습니다.
> 
> - **EC2 name (tag)**: order-bastion
> - **AMI**: Amazon Linux 2023
> - **Instance size**: t3.micro
> 
> ### SQS 구성
> 
> 주문을 수신하고 처리하기 위해 SQS queue를 생성합니다. 문제에서 명시되어 있지 않은 값은 모두 기본값을 사용하도록 합니다.
> 
> - **SQS Name**: order-queue
> 
> ### 오토스케일링 구성
> 
> SQS에 적재된 메시지의 수에 따라 Pod의 개수가 조정되어야 합니다. KEDA operator를 EKS cluster에 설치하여 사용하도록 합니다. 설치 방법은 [https://keda.sh/docs/2.15/deploy](https://keda.sh/docs/2.15/deploy)를 참고합니다. 
> 
> Operator Pod의 이름은 keda-operator가 포함되어야 합니다. 과제 종료 전 모든 부하를 제거하고 운영 중인 Order Pod는 1대만 있어야 합니다. 초과할 시 채점이 불가능합니다. 부하 주입 후 Pod 증설까지 5분 대기하며, 증설 후 Pod 감소까지도 5분 대기합니다.
> 
> - **Keda 스케일링 메시지 수(권장)**: 5

# 3. Infrastructure as Code

> Terraform을 활용해 VPC, EC2 등 클라우드 인프라를 생성하고자 합니다. Terraform 코드를 작성합니다.
> 
> ### Bastion 구성
> 
> 채점 시 사용하기 위해 Bastion 인스턴스를 생성합니다. Bastion 인스턴스는 Default VPC에 배포하며, AdministratorAccess 권한을 가지고 있어야 합니다. 
> 
> 모든 Terraform Code는 `/home/ec2-user/korea/` 경로에 위치해야 합니다. 채점 전 해당 경로에서 `terraform init`, `terraform destory`, `terraform apply` 명령어를 실행하여 생성된 리소스 삭제 후 채점합니다.
> 
> - **EC2 Name**: korea-bastion
> - **AMI**: Amazon Linux 2023
> - **EC2 type**: t3.micro
> 
> ### Terraform 구성
> 
> Terraform code를 작성하여 아래의 주어진 VPC, EC2, IAM 리소스들을 생성하여야 합니다. 
> 
> 만약 사전에 생성된 리소스가 있는 경우 리소스 이름이 중복되어 Terraform 명령어에 오류가 발생할 수 있으므로 채점 전에 Default VPC와 Bastion을 제외한 모든 리소스를 삭제하도록 합니다. 
> 
> Terraform으로 생성된 모든 리소스는 `Proejct=KoreaSkills` 태그를 갖도록 구성합니다.
> 
> - **VPC name (tag)**: korea-vpc
> - **VPC CIDR**: `10.0.0.0/16`
> - **Public subnet name (tag)**: korea-public-subnet-a (ap-northeast-2a zone 이용)
> - **Public subnet CIDR**: `10.0.0.0/24`
> - **EC2 name (tag)**: korea-instance
> - **EC2 AMI**: Amazon Linux 2023
> - **EC2 type**: t3.micro
> - **EC2 subnet**: korea-public-subnet-a
> - **EC2 EBS encryption**: 활성화
> - **EC2 IAM role**: AmazonSSMManagedInstanceCore 권한 가지도록 구성 (SSM session manager 연결 가능)

# 4. EC2 Automation

> EC2 삭제 자동화를 구성합니다. 해당 문제는 ap-northeast-1(도쿄) 지역에 리소스를 생성합니다. 
> 
> Defaut VPC가 지정되어 있어 `aws ec2 run-instances` 명령어로 EC2 생성 시 별도 VPC ID를 지정하지 않더라도 EC2가 생성되도록 합니다.
> 
> ### EC2 Bastion Host 구성
> 
채점 시 사용할 EC2 Bastion Host를 생성합니다. Default VPC에 배포되어야 하며, AdministratorAccess 권한을 가지고 있어야 합니다. 
> 
> 또한 자동화 스크립트 실행 시 실수로 삭제되지 않도록 조처를 해야 합니다. 만약 Bastion 인스턴스가 삭제된 경우 이후 채점이 불가하므로 주의하도록 합니다.
> 
> - **EC2 name (tag)**: automation-bastion
> - **EC2 termination protetion**: 활성화
> - **EC2 AMI**: Amazon Linux 2023
> - **EC2 Type**: t3.micro
> 
> ### 자동화 구성
> 
> 불필요한 EC2 instance를 삭제할 수 있는 2개의 자동화 스크립트를 작성해야 합니다. 작성한 스크립트는 `/home/ec2-user/ec2-automation/` 경로에 위치해야 하며, 이 외의 경로에 존재하는 스크립트는 채점하지 않습니다.
> 
> #### `delete_old_instance.sh` 스크립트
> 
> - `Project=skills2022` 라는 태그가 부여된 모든 인스턴스를 삭제합니다.
> - 만약 조건에 맞지 않는 다른 인스턴스를 삭제한 경우 감점될 수 있습니다.
> 
> #### `delete_all_instance.sh` 스크립트
> 
> - EC2 Bastion Host를 제외한 계정에 존재하는 모든 인스턴스를 삭제합니다.
> - 스크립트 실행 후 EC2 Bastion Host 외에 실행 및 중지된 인스턴스 존재 시 감점될 수 있습니다.
