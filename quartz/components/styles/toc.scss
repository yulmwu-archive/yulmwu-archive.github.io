@use '../../styles/variables.scss' as *;

.toc {
	display: flex;
	flex-direction: column;
	overflow-y: hidden;
	min-height: 1.4rem;
	flex: 0 0.5 auto;
	border-left: 1px solid var(--lightgray);
	padding-left: 1rem;
	font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;

	&:has(button.toc-header.collapsed) {
		flex: 0 1 1.4rem;
	}
}

button.toc-header {
	background-color: transparent;
	border: none;
	text-align: left;
	cursor: pointer;
	padding: 0;
	color: var(--dark);
	display: none;

	& h3 {
		font-size: 0.85rem !important;
		display: inline-block;
		margin: 0;
	}

	& .fold {
		margin-left: 0.5rem;
		transition: transform 0.3s ease;
		opacity: 0.8;
	}

	&.collapsed .fold {
		transform: rotateZ(-90deg);
	}
}

ul.toc-content.overflow {
	list-style: none;
	position: relative;
	margin: 0;
	padding: 0;
	max-height: calc(100% - 2rem);
	overscroll-behavior: contain;
	list-style: none;
	font-size: 0.85rem !important;
	font-weight: 300;

	// Thin scrollbar styling
	&::-webkit-scrollbar {
		width: 4px;
	}

	&::-webkit-scrollbar-track {
		background: transparent;
	}

	&::-webkit-scrollbar-thumb {
		background: var(--lightgray);
		border-radius: 2px;
	}

	&::-webkit-scrollbar-thumb:hover {
		background: var(--gray);
	}

	// Firefox scrollbar
	scrollbar-width: thin;
	scrollbar-color: var(--lightgray) transparent;

	& > li {
		margin: 0;
		line-height: 1.3;

		& > a {
			color: var(--dark);
			opacity: 0.35;
			font-weight: 300;
			font-size: 0.85rem !important;
			transition:
				0.5s ease opacity,
				0.3s ease color;
			&.in-view {
				opacity: 0.75;
			}
		}
	}

	@for $i from 0 through 6 {
		& .depth-#{$i} {
			padding-left: calc(0.7rem * #{$i});
		}
	}
}
